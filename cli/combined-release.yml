project_name: turbo
# before:
#   hooks:
#     - make compile-protos
#     - go mod tidy

dist: dist

builds:
  - id: turbo
    builder: prebuilt
    goos:
      - linux
      - windows
      - darwin
    goarch:
      - amd64
      - arm64
    goamd64:
      - v1
    prebuilt:
      path: dist-combined/turbo_{{ .Os }}_{{ .Arch }}{{ with .Amd64 }}_{{ .}}{{ end }}/bin/turbo{{ .Ext }}
    hooks:
      pre:
        - cmd: ./scripts/npm-native-packages/npm-native-packages.js {{ .Os }} {{ .Arch }} {{ .Version }}
    binary: turbo
    # mod_timestamp: "{{ .CommitTimestamp }}"
    # env:
    #   - CGO_ENABLED=1
    # targets:
    #   - darwin_arm64
    #   - darwin_amd64
    # overrides:
    #   - goos: darwin
    #     goarch: arm64
    #     env:
    #       - CC=oa64-clang
    #       - CXX=oa64-clang++
    #   - goos: darwin
    #     goarch: amd64
    #     goamd64: v1
    #     env:
    #       - CC=o64-clang
    #       - CXX=o64-clang++
